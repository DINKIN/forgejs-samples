<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="author" content="GoPro, Inc.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta http-equiv="x-ua-compatible" content="IE=edge" />
    <title>ForgeJS sample - Hotspots with actions</title>
    <meta property="og:title" content="ForgeJS sample - Hotspots with actions" />
    <meta property="og:description" content="Add actions to hotspots." />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://releases.forgejs.org/latest/samples/projects/hotspots-actions/" />
    <meta property="og:image" content="https://cdn.forgejs.org/grav/images/ForgeJS-logo-1200x630.png" />
    <meta property="og:site_name" content="ForgeJS" />

    <!-- Little styling -->
    <style type="text/css">
        @-ms-viewport { width: device-width; }
        @-o-viewport { width: device-width; zoom: 1.0; min-zoom: 1.0; max-zoom: 1.0; }
        @viewport { width: device-width; zoom: 1.0; min-zoom: 1.0; max-zoom: 1.0; }

        html, body
        {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        div#container
        {
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="container"></div>

    <!-- Include the threejs custom build -->
    <script src="../../../sources/lib/three.js/three.r94.custom.js"></script>
    <script src="../../../sources/lib/webvr.js"></script>

    <!-- Include the Hammer.js library -->
    <script src="../../lib/hammer.js/hammer.min.js"></script>

    <!-- Include the ForgeJS library -->
    <script type="text/javascript" src="../../../sources/build/forge.js" ></script>

    <!-- Start ForgeJS -->
    <script type="text/javascript">

//        FORGE.Picking.DEBUG = true;
       // FORGE.CameraGaze.DEBUG = true;

        // Create a viewer
        var viewer = new FORGE.Viewer("container", "config.json");

        var onEnterVR = function(display)
        {
            var canvas = viewer.renderer.webGLRenderer.domElement;
            var w = canvas.width;
            var h = canvas.height;

            viewer.container.resize(w, h);

            viewer.vr = true;
        };

        var onExitVR = function()
        {
            viewer.vr = false;
            viewer.renderer.vr = true;
            // WebVRManager  onVRDisplayPresentChange needs scope.enabled (vr flag) to be ON to restore canvas size
            // we set it to false in sceneRenderer after background and object rendering
            // that should be fixed

            var canvas = viewer.renderer.webGLRenderer.domElement;
            var w = canvas.width;
            var h = canvas.height;

            viewer.container.resize(w, h);
        };

        viewer.onConfigLoadComplete.add(function() {
            var renderer = viewer.renderer.webGLRenderer;
            document.body.appendChild( WEBVR.createButton( renderer, onEnterVR, onExitVR ) );
        });


        // navigator.getVRDisplays().then(displays => {
        //     // If we have a native VRDisplay, or if the polyfill
        //     // provided us with a CardboardVRDisplay, use it
        //     if (displays.length) {
        //         vrDisplay = displays[0];


        //         viewer.onConfigLoadComplete.add(function() {
        //             var vrManager = viewer.renderer.webGLRenderer.vr;
        //             vrManager.setDevice(vrDisplay);
        //             // vrManager.enabled = true;

        //             vrDisplay.requestPresent([{ source: viewer.renderer.webGLRenderer.domElement }]);
        //         }, this);

        //     }
        // });


    </script>
</body>
</html>
